*Inspiration: `examples/FEATURE_ASSEMBLY_LINE_CONCEPT.md`*

**The Concept:**
Recursion in code usually implies drilling *down* into data structures. But we can also recurse *forward in time* across the feature lifecycle.

1. A user requests a feature.
2. The Root Model enters the **Planning Environment**.
3. Upon finalizing the plan, the Planning Environment dynamically executes code to construct and launch the **Implementation Environment**, passing only the architectural constraints as the environment state in Cairn KV.
4. If the Implementation Environment encounters an error, it doesn't just fail; it dynamically constructs a **Debugging Environment**, injecting the stack trace as the primary context variable, and recurses into it.

**Remora Implementation Mappings:**

*   **Agent Bundles Required:**
    *   `planner`: Analyzes requirements and drafts the `implementation_plan.md`.
    *   `implementer`: Actually executes the Grail commands to mutate the codebase.
    *   `debugger`: Injected purely with stack-traces and diffs if the `implementer`'s verification tests fail.
*   **Grail Tools (`.pym`) Required:**
    *   `transition_phase.pym`:
        *   **Functionality:** Suspends the current task and spawns a new Temporal Environment running a different Agent Bundle. Writes the "constraints" payload to the `remora.hub.db` for the next agent to read.
        *   **Inputs:** `next_bundle_name: str` (e.g., `"implementer"`), `state_constraints: dict`.
        *   **Outputs:** Terminates the current agent session; Coordinator returns an event stream confirmation that the next phase has started.
    *   `spawn_debugging_environment.pym`:
        *   **Functionality:** An error-handler tool specifically for the `implementer`. Instead of trying to fix the bug itself, it recurses into a dedicated `debugger` environment.
        *   **Inputs:** `failing_test_command: str`, `stack_trace: str`, `recent_diffs: str`.
        *   **Outputs:** `debugging_task_id: str` (The implementer waits for this task to complete before continuing).