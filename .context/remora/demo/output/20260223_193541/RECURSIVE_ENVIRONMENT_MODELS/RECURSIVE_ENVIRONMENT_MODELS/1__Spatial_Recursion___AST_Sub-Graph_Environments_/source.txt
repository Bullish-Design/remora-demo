*Inspiration: `examples/TREESITTER_AGENT_SWARM_CONCEPT.md`*

**The Concept:**
Instead of passing the entire codebase to a single logic model as a massive string prompt, the Root Architect is placed in a sandbox where the *Tree-sitter AST is a queryable object*. The model operates programmatically on the tree, completely unconstrained by strict traversal rules.

For example, when refactoring an API:

1. The Root Environment receives the codebase as an accessible AST object rather than text.
2. The agent writes simple Python scripts in its REPL sandbox to interact with the AST (e.g., `ast_graph.find_functions(name_contains="get_", return_type="dict")`). 
3. Based on what its programmatic queries return, it dynamically isolates a subset of the graph.
4. It recursively spawns sub-environments, injecting *only* that isolated sub-graph context, and dynamically loads the appropriate LoRA adapter (e.g., a "function_definition_expert") to execute localized refactoring tasks.

**Remora Implementation Mappings:**

*   **Agent Bundles Required:**
    *   `architect`: The Root Agent. Loaded with `function_gemma` and an `architect-v1` LoRA. It is the only agent that receives the global `ast_graph`.
    *   `node_implementer`: The spawned worker agent. It is passed specific `node_ids` to construct its localized Cairn Workspace Bridge.
*   **Grail Tools (`.pym`) Required:**
    *   `query_ast.pym`:
        *   **Functionality:** Allows the Architect to write and execute basic python traversal scripts against the Tree-sitter AST Graph object in its sandbox.
        *   **Inputs:** `script: str` (The Python execution sequence).
        *   **Outputs:** JSON representation of discovered `TreeNode` objects (IDs, types, and file locations).
    *   `spawn_node_environment.pym`:
        *   **Functionality:** The trigger to initiate the fan-out recursion. Tells the `Coordinator` to batch new tasks for the identified nodes.
        *   **Inputs:** `node_ids: list[str]`, `target_agent: str` (e.g., `"node_implementer"`), `intent: str`.
        *   **Outputs:** `task_ids: list[str]` representing the newly spawned sub-tasks on the Hub daemon.