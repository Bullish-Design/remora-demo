from grail import Input

ruff_config: str = Input("ruff_config", default="")
pyproject_config: str = Input("pyproject_config", default="")


def _extract_tool_section(content: str, section: str) -> str:
    lines = content.splitlines()
    header = f"[{section}]"
    start_index = None
    for idx, line in enumerate(lines):
        if line.strip() == header:
            start_index = idx
            break
    if start_index is None:
        return ""
    collected = [lines[start_index]]
    for line in lines[start_index + 1 :]:
        if line.startswith("[") and line.strip().endswith("]"):
            break
        collected.append(line)
    return "\n".join(collected).strip()


try:
    if ruff_config:
        result = ruff_config
    elif pyproject_config:
        result = _extract_tool_section(pyproject_config, "tool.ruff")
    else:
        result = ""
except Exception:
    result = ""

result
